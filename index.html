<!doctype html><html> <head> <meta charset="utf-8"> <title> fq-novel-store </title> <style> .box { border: 1px solid #000000; margin: 10px auto; width: 40%; padding: 10px; border-radius: 15px; -webkit-box-shadow: 1px 1px 1px #000000; box-shadow: 1px 1px 1px #000000; cursor: pointer; text-align: center; transition-duration: 0.6s; font-size: large;} .box:hover {transition-duration: 0.6s;transform: scale(1.05);} </style> <script src="https://libs.baidu.com/jquery/2.1.4/jquery.min.js"> </script> </head> <body style="text-align: center"> <h1> fq-novel-store </h1> <div id="booklist"> </div> <script> $(document).ready(function() { function fetchTextFile(url, filename) { var xhr = new XMLHttpRequest(); xhr.open('GET', url, true); xhr.responseType = 'blob'; xhr.onload = function() { if (xhr.status === 200) { var blob = xhr.response; var url = URL.createObjectURL(blob); var a = document.createElement('a'); a.href = url; a.download = filename; document.body.appendChild(a); a.click(); document.body.removeChild(a); URL.revokeObjectURL(url); } else { console.error('下载文件失败: ' + xhr.statusText); } }; xhr.onerror = function() { console.error('请求失败'); }; xhr.send(); } $.getJSON("booklist.json", function(data) { var $booklist = $('#booklist'); $booklist.empty(); $.each(data, function(i, item) { var url = 'book/' + item + '.txt'; var filename = item + '.txt'; $booklist.append('<div class="box" data-url="' + url + '" data-filename="' + filename + '">' + item + '</div><br/>'); }); $('#booklist').on('click', '.box', function() { var url = $(this).data('url'); var filename = $(this).data('filename'); fetchTextFile(url, filename); }); }).fail(function(jqXHR, textStatus, errorThrown) { console.error("获取数据失败: " + textStatus, errorThrown); }); }); </script> </body></html>